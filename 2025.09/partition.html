<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ±ºç­–é¢¨æ ¼å¿ƒç†æ¸¬é©—</title>
  <style>
    body {
      font-family: "Helvetica Neue", sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    #quiz-container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      max-width: 600px;
      width: 100%;
    }
    h2 {
      font-size: 1.4em;
      margin-bottom: 20px;
    }
    button {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 15px;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      background: #e0e0e0;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #ccc;
    }
    .result {
      font-size: 1.2em;
      margin-top: 20px;
      padding: 20px;
      background: #f0f8ff;
      border-left: 5px solid #007acc;
      border-radius: 5px;
    }
    .nav-buttons {
      display: flex;
      justify-content: flex-start;
      margin-top: 20px;
    }
    #prevBtn {
      width: auto;
      padding: 10px 20px;
      background: #007acc;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    #prevBtn:hover {
      background: #005f99;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div id="quiz-container">
    <!-- é¦–é  -->
    <div id="home">
      <h2>æ­¡è¿ä¾†åˆ°ã€Œæ±ºç­–é¢¨æ ¼å¿ƒç†æ¸¬é©—ã€</h2>
      <p>é€é 5 é¡Œå•é¡Œï¼Œæ¢ç´¢ä½ åšæ±ºå®šçš„é¢¨æ ¼é¡å‹ï¼</p>
      <button id="startBtn">é–‹å§‹æ¸¬é©—</button>
    </div>

    <!-- æ¸¬é©—å€ -->
    <div id="quiz" class="hidden">
      <h2 id="question">é¡Œç›®</h2>
      <div id="choices"></div>
      <div class="nav-buttons">
        <button id="prevBtn">â† ä¸Šä¸€é¡Œ</button>
      </div>
    </div>

    <!-- çµæœå€ -->
    <div id="result" class="result hidden">
      <div id="resultText"></div>
      <button id="restartBtn">é‡æ–°æ¸¬é©—</button>
    </div>
  </div>

<script>
  const quiz = [
    {
      question: "Q1. ç•¶ä½ é¢å°ä¸€å€‹å¤§æ–¹å‘çš„æ±ºå®šï¼ˆå¦‚æ˜¯å¦æ›å·¥ä½œï¼‰ï¼Œä½ æœƒæ€éº¼é–‹å§‹ï¼Ÿ",
      answers: [
        { text: "åš SWOT åˆ†æã€åˆ—å„ªç¼ºé»è¡¨", type: "A" },
        { text: "çœ‹è‡ªå·±ç¾åœ¨çš„æ„Ÿè¦ºå’Œç‹€æ…‹", type: "B" },
        { text: "å…ˆæ”¾è‘—ï¼Œå†ç­‰å¹¾å¤©çœ‹çœ‹ç‹€æ³", type: "C" },
        { text: "æœ‰å€‹æƒ³æ³•å°±å…ˆé–‹å§‹è¡Œå‹•ï¼Œé‚Šåšé‚Šèª¿æ•´", type: "D" }
      ]
    },
    {
      question: "Q2. ç•¶æœ‹å‹å•ä½ é€±æœ«è¦ä¸è¦å‡ºé–€èšæœƒï¼Œä½ æœ€å¸¸å›æ‡‰æ˜¯ï¼Ÿ",
      answers: [
        { text: "å•ç´°ç¯€å†çœ‹è¡Œç¨‹æ±ºå®š", type: "A" },
        { text: "è½èµ·ä¾†æœ‰è¶£å°±ç›´æ¥ç­”æ‡‰", type: "B" },
        { text: "èªªã€Œå†çœ‹çœ‹ã€ï¼Œå…¶å¯¦åœ¨æ‹–", type: "C" },
        { text: "ç›´æ¥ç­”æ‡‰ï¼Œå•äº†å†èªª", type: "D" }
      ]
    },
    {
      question: "Q3. å°æ™‚å€™ä½ åœ¨å®¶ä¸­æ’è¡Œæ˜¯ï¼Ÿ\nğŸ“Œ å¦‚æœä½ å®¶è£¡åªæœ‰å…©å€‹å­©å­ï¼Œè€äºŒè«‹é¸ã€Œè€ä¹ˆã€",
      answers: [
        { text: "è€å¤§", type: "A" },
        { text: "ä¸­é–“ï¼ˆ3äººä»¥ä¸Šå®¶åº­ï¼‰", type: "C" },
        { text: "è€ä¹ˆï¼ˆæˆ–2äººä¸­çš„è€äºŒï¼‰", type: "D" },
        { text: "ç¨ç”Ÿå­å¥³", type: "B" }
      ],
      isTiebreaker: true
    },
    {
      question: "Q4. å¦‚æœä½ æ­£åœ¨æŒ‘é¸ä¸€ä»½ç¦®ç‰©çµ¦æœ‹å‹ï¼Œä½ æœƒæ€éº¼åšï¼Ÿ",
      answers: [
        { text: "çœ‹å°æ–¹éœ€æ±‚ã€é ç®—ã€è©•åƒ¹å†é¸", type: "A" },
        { text: "èµ°é€²åº—è£¡ï¼Œçœ‹åˆ°å–œæ­¡çš„å°±è²·", type: "B" },
        { text: "çŒ¶è±«å¾ˆä¹…éƒ½æ±ºå®šä¸äº†", type: "C" },
        { text: "æƒ³åˆ°ä¸€å€‹æœ‰è¶£çš„é»å­å°±é¦¬ä¸Šåš", type: "D" }
      ]
    },
    {
      question: "Q5. é‡åˆ°çªç„¶ç™¼ç”Ÿçš„çªç™¼ç‹€æ³ï¼ˆå¦‚æ´»å‹•å–æ¶ˆï¼‰ï¼Œä½ æœ€å¯èƒ½ï¼Ÿ",
      answers: [
        { text: "ç«‹åˆ»é‡æ–°å®‰æ’å‚™æ¡ˆï¼Œç¢ºä¿æµç¨‹é †æš¢", type: "A" },
        { text: "è¦ºå¾—æ²’é—œä¿‚ï¼Œåæ­£é †å…¶è‡ªç„¶", type: "B" },
        { text: "æ„Ÿåˆ°ç„¦æ…®ï¼Œä¸çŸ¥å¦‚ä½•æ˜¯å¥½", type: "C" },
        { text: "èªªï¼šé‚£æˆ‘å€‘æ›å€‹ç©æ³•å§ï¼é¦¬ä¸Šææ–°æ–¹æ¡ˆ", type: "D" }
      ]
    }
  ];

  let currentQuestion = 0;
  const answersGiven = []; // ç´€éŒ„æ¯é¡Œç­”æ¡ˆtype
  const scores = { A: 0, B: 0, C: 0, D: 0 };
  let tiebreaker = null;

  const homeDiv = document.getElementById("home");
  const quizDiv = document.getElementById("quiz");
  const resultDiv = document.getElementById("result");
  const questionEl = document.getElementById("question");
  const choicesDiv = document.getElementById("choices");
  const prevBtn = document.getElementById("prevBtn");
  const resultText = document.getElementById("resultText");
  const startBtn = document.getElementById("startBtn");
  const restartBtn = document.getElementById("restartBtn");

  startBtn.addEventListener("click", startQuiz);
  prevBtn.addEventListener("click", prevQuestion);
  restartBtn.addEventListener("click", restartQuiz);

  function startQuiz() {
    homeDiv.classList.add("hidden");
    resultDiv.classList.add("hidden");
    quizDiv.classList.remove("hidden");
    currentQuestion = 0;
    answersGiven.length = 0;
    for (let key in scores) scores[key] = 0;
    tiebreaker = null;
    showQuestion();
  }

  function showQuestion() {
    const q = quiz[currentQuestion];
    questionEl.textContent = q.question;
    choicesDiv.innerHTML = "";

    // å»ºç«‹é¸é …æŒ‰éˆ•
    q.answers.forEach((answer, idx) => {
      const btn = document.createElement("button");
      btn.textContent = answer.text;
      btn.onclick = () => {
        // å¦‚æœä¹‹å‰é¸éæ­¤é¡Œï¼Œæ‰£å›èˆŠåˆ†æ•¸
        if (answersGiven[currentQuestion]) {
          let oldType = answersGiven[currentQuestion];
          if (!q.isTiebreaker) {
            scores[oldType]--;
          } else {
            tiebreaker = null;
          }
        }

        // è¨˜éŒ„æ–°ç­”æ¡ˆï¼Œæ›´æ–°åˆ†æ•¸
        answersGiven[currentQuestion] = answer.type;
        if (!q.isTiebreaker) {
          scores[answer.type]++;
        } else {
          tiebreaker = answer.type;
        }

        // ä¸‹ä¸€é¡Œæˆ–çµæŸ
        if (currentQuestion < quiz.length - 1) {
          currentQuestion++;
          showQuestion();
        } else {
          showResult();
        }
      };

      // å¦‚æœé€™é¡Œæ›¾é¸éæ­¤ç­”æ¡ˆï¼Œå¼·èª¿æŒ‰éˆ•
      if (answersGiven[currentQuestion] === answer.type) {
        btn.style.backgroundColor = "#b3d4fc";
      }

      choicesDiv.appendChild(btn);
    });

    // é¡¯ç¤ºæˆ–éš±è—ä¸Šä¸€é¡ŒæŒ‰éˆ•
    prevBtn.style.display = currentQuestion > 0 ? "inline-block" : "none";
  }

  function prevQuestion() {
    if (currentQuestion === 0) return;

    // æ‰£æ‰ç›®å‰é¡Œç›®åˆ†æ•¸
    const currentQ = quiz[currentQuestion];
    const currentAnswer = answersGiven[currentQuestion];
    if (currentAnswer && !currentQ.isTiebreaker) {
      scores[currentAnswer]--;
    } else if (currentQ.isTiebreaker) {
      tiebreaker = null;
    }

    currentQuestion--;
    showQuestion();
  }

  function showResult() {
    quizDiv.classList.add("hidden");
    resultDiv.classList.remove("hidden");

    // è¨ˆç®—æœ€é«˜åˆ†å‹åˆ¥
    const maxScore = Math.max(...Object.values(scores));
    const topTypes = Object.keys(scores).filter(k => scores[k] === maxScore);

    // è‹¥æœ‰å¤šé‡æœ€é«˜åˆ†ï¼Œç”¨tiebreakeråˆ¤å®šï¼Œæ²’æœ‰å‰‡ç”¨ç¬¬ä¸€å€‹
    const finalType = topTypes.length === 1 ? topTypes[0] : (tiebreaker || topTypes[0]);

    const messages = {
      A: "ğŸ§  ä½ æ˜¯ã€åˆ†æå‹æ€è€ƒè€…ã€‘ï¼šé‚è¼¯æ¸…æ™°ã€åšäº‹è¬¹æ…ï¼Œæ˜¯åœ˜éšŠè£¡çš„æ™ºå¤šæ˜Ÿã€‚",
      B: "âœ¨ ä½ æ˜¯ã€ç›´è¦ºå‹è¡Œå‹•è€…ã€‘ï¼šæ†‘æ„Ÿè¦ºèµ°äººç”Ÿï¼Œéˆå…‰ä¸€é–ƒå°±æ˜¯ä½ å‡ºæ‰‹çš„æ™‚æ©Ÿã€‚",
      C: "ğŸ˜… ä½ æ˜¯ã€æ‹–å»¶å‹è§€æœ›è€…ã€‘ï¼šè¬¹æ…å°å¿ƒï¼Œä½†å¸¸å¸¸ä¸€æ‹–å†æ‹–ï¼Œä¸åšæ±ºå®šå°±æ˜¯ä½ çš„æ±ºå®šã€‚",
      D: "âš¡ ä½ æ˜¯ã€è¡å‹•å‹åŸ·è¡Œè€…ã€‘ï¼šæƒ³åˆ°å°±åšï¼Œéˆæ´»æœ‰è¡å‹ï¼Œè¡Œå‹•åŠ›çˆ†è¡¨ï¼"
    };

    resultText.textContent = messages[finalType] || "æ¸¬é©—å®Œæˆï¼Œç„¡æ³•åˆ¤æ–·çµæœã€‚";
  }

  function restartQuiz() {
    // æ¸…ç©ºæ‰€æœ‰ç´€éŒ„
    currentQuestion = 0;
    answersGiven.length = 0;
    for (let key in scores) scores[key] = 0;
    tiebreaker = null;

    // é¡¯ç¤ºé¦–é ï¼Œéš±è—å…¶ä»–å€å¡Š
    resultDiv.classList.add("hidden");
    quizDiv.classList.add("hidden");
    homeDiv.classList.remove("hidden");
  }
</script>
</body>
</html>
