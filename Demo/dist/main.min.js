!function() {
    "use strict";
    new Vue({
      el: "#app",
      data: {
        gas: "https://script.google.com/macros/s/AKfycbwtEpcsTof3vOkdDTlZojWXsrVK_DFMQT9Wu2N1hJi7rqIdzttDGPtK55dr7PTWvGS5_Q/exec",
        name: "",
        phone: "",
        persons: {},
        person: {},
        formAction: "https://docs.google.com/forms/u/0/d/e/1FAIpQLSfLFQnkyH0pjGjZbFV-dw_O1Z7oAJ9SDgd4lO34BVFLRwi7tA/formResponse",
        input: {
          id:'entry.1339314469',
          name: 'entry.2132758197',
          phone: 'entry.1937240046',
          area: 'entry.2050668982',
          org_1: 'entry.435100097',
          org_2: 'entry.1577594074',
          org_3: 'entry.152815214',
          age: 'entry.769254',
          note: 'entry.1172474453'
        },
        loading: !1
      },
      methods: {

        submit: function() {
          var t = this;
          if (void 0 !== this.person.area) {
            var n = ""
              .concat(this.input.id, "=")
              .concat(this.person.id, "&")
              .concat(this.input.name, "=")
              .concat(this.person.name, "&")
              .concat(this.input.phone, "=")
              .concat(this.person.phone, "&")
              .concat(this.input.area, "=")
              .concat(this.person.area, "&")
              .concat(this.input.org_1, "=")
              .concat(this.person.org_1, "&")
              .concat(this.input.org_2, "=")
              .concat(this.person.org_2, "&")
              .concat(this.input.org_3, "=")
              .concat(this.person.org_3, "&")
              .concat(this.input.age, "=")
              .concat(this.person.age, "&")
              .concat(this.input.note, "=")
              .concat(this.person.note || "無");
            fetch(this.formAction + "?" + n, { method: "POST" }).catch(function(n) {
              alert("提交成功。"), t.name = "",t.phone="", t.person = {};
            });
          }
        }
      },
      watch: {
        name: function(t) {
          var n = this;
          if(this.name.lenth >2 || this.name.length <5)
            if (void 0 === this.persons[this.name]) {
              this.loading = !0;
              var i = this.gas + "?name=" + this.name + "&phone=" + this.phone;
              fetch(i, { method: "POST" })
                .then(function(t) {
                  return t.json();
                })
                .then(function(t) {
                  n.persons[n.name] = t, n.person = t, n.loading = !1;
                });
              console.log("n.name=",n.name);
              console.log("person=",n.person);
              console.log("persons=",n.persons);
            } 
            else this.person = this.persons[this.name]; 
            console.log("person=",JSON.stringify(this.person));
            console.log("persons=",JSON.stringify(this.persons));
        },
        phone: function(t){
          if(t.length === 10){
          var phoneString = t.toString();
          var phoneString_1 = phoneString.slice(0,4);
          var phoneString_2 = phoneString.slice(4,7);
          var phoneString_3 = phoneString.slice(7);
          var formatPhone = phoneString_1 +'-' + phoneString_2 +'-' + phoneString_3 ;

          var n = this;
          if (this.phone.length ==0) {
            this.loading = !0;
            var i = this.gas + "?name=" + this.name + "&phone=" + formatPhone;
            fetch(i, { method: "POST" })
              .then(function(t) {
                return t.json();
              })
              .then(function(t) {
                n.persons[n.name] = t, n.person = t, n.loading = !1;
              });
            console.log("n.name=",n.name);
            console.log("person=",n.person);
            console.log("persons=",n.persons);
          } 
          if (this.phone.length !=0) {
            this.loading = !0;
            var i = this.gas + "?name=" + this.name + "&phone=" + formatPhone;
            fetch(i, { method: "POST" })
              .then(function(t) {
                return t.json();
              })
              .then(function(t) {
                n.persons[n.name] = t, n.person = t, n.loading = !1;
              });
            console.log("n.name=",n.name);
            console.log("person=",n.person);
            console.log("persons=",n.persons);
          } 
          else this.person = this.persons[this.name]; 
          console.log("person=",JSON.stringify(this.person));
          console.log("persons=",JSON.stringify(this.persons));
        }
        }
      }
    });
  }();
  